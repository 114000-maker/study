
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Pages æª”æ¡ˆä¸Šå‚³å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        .file-path-link {
            word-break: break-all;
        }
        /* ç°¡å–®çš„ ë¡œë”© ìŠ¤í”¼ë„ˆ ì• ë‹ˆë©”ì´ì…˜ */
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #3498db;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl bg-gray-800 rounded-xl shadow-2xl p-6 md:p-8 space-y-6">
        <div class="text-center">
             <div class="flex justify-center items-center gap-3">
                <h1 class="text-2xl md:text-3xl font-bold text-white">GitHub Pages æª”æ¡ˆä¸Šå‚³å·¥å…·</h1>
                <button id="helpBtn" class="bg-teal-600 hover:bg-teal-700 text-white font-bold p-2 rounded-full transition-colors duration-300" title="æŸ¥çœ‹èªªæ˜">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-question-lg" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M4.475 5.458c-.284 0-.514.237-.47.517l.273 1.512c.038.21.22.368.44.368h.975a.5.5 0 0 0 0-1H5.98l-.2-1.102a.49.49 0 0 1 .11-.328.5.5 0 0 1 .38-.187h.5a.5.5 0 0 0 0-1h-.5a1.5 1.5 0 0 0-1.5 1.5l-.273 1.512A1.5 1.5 0 0 0 5.69 8.5h.975a.5.5 0 0 0 0-1H6.665l.2-1.102a1.5 1.5 0 0 1 1.48-1.258h.5a.5.5 0 0 0 0-1h-.5A2.5 2.5 0 0 0 4.475 5.458zM8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zm0 13a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm.002-4a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
                    </svg>
                </button>
            </div>
            <p class="text-gray-400 mt-2">å°‡æª”æ¡ˆæˆ–è³‡æ–™å¤¾ç›´æ¥ä¸Šå‚³åˆ°æ‚¨çš„ GitHub å€‰åº«ä¸¦å–å¾—ç¶²é è·¯å¾‘ã€‚</p>
        </div>

        <!-- èªªæ˜å€å¡Š -->
        <div class="bg-gray-700/50 p-4 rounded-lg border border-gray-600">
            <h2 class="font-semibold text-lg text-blue-300 mb-2">ä½¿ç”¨æ­¥é©Ÿï¼š</h2>
            <ol class="list-decimal list-inside text-gray-300 space-y-2 text-sm">
                <li>
                    å‰å¾€ GitHub ç”Ÿæˆ <a href="https://github.com/settings/tokens/new?scopes=repo&description=WebUploaderToken" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:underline">Personal Access Token (PAT)</a>ã€‚
                    <br>è«‹å‹™å¿…å‹¾é¸ `repo` æ¬Šé™ç¯„åœã€‚
                </li>
                <li>å°‡ç”Ÿæˆçš„ Tokenã€æ‚¨çš„ GitHub ä½¿ç”¨è€…åç¨±ã€å€‰åº«åç¨±å’Œåˆ†æ”¯åç¨±å¡«å…¥ä¸‹æ–¹æ¬„ä½ã€‚</li>
                <li>é¸æ“‡è¦ä¸Šå‚³çš„æª”æ¡ˆæˆ–è³‡æ–™å¤¾ã€‚</li>
                <li>é»æ“Šã€Œé–‹å§‹ä¸Šå‚³ã€æŒ‰éˆ•ã€‚</li>
            </ol>
            <p class="text-xs text-yellow-400 mt-3"><strong>æ³¨æ„ï¼š</strong>æ‚¨çš„è³‡æ–™ (åŒ…å« PAT) å°‡æœƒå„²å­˜åœ¨æ‚¨ç€è¦½å™¨çš„æœ¬åœ°å„²å­˜ç©ºé–“ã€‚<strong>è«‹å‹¿åœ¨å…¬ç”¨é›»è…¦ä¸Šä½¿ç”¨æ­¤åŠŸèƒ½ã€‚</strong></p>
        </div>

        <!-- è¼¸å…¥è¡¨å–® -->
        <div class="space-y-4">
            <div>
                <label for="token" class="block text-sm font-medium text-gray-300 mb-1">GitHub Personal Access Token (PAT)</label>
                <input type="password" id="token" class="w-full bg-gray-700 border border-gray-600 rounded-md p-2.5 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="è²¼ä¸Šæ‚¨çš„ token">
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label for="username" class="block text-sm font-medium text-gray-300 mb-1">ä½¿ç”¨è€…åç¨±</label>
                    <input type="text" id="username" class="w-full bg-gray-700 border border-gray-600 rounded-md p-2.5 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., octocat">
                </div>
                <div>
                    <label for="repo" class="block text-sm font-medium text-gray-300 mb-1">å€‰åº«åç¨± (Repo)</label>
                    <input type="text" id="repo" class="w-full bg-gray-700 border border-gray-600 rounded-md p-2.5 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., my-website">
                </div>
                <div>
                    <label for="branch" class="block text-sm font-medium text-gray-300 mb-1">åˆ†æ”¯ (Branch)</label>
                    <input type="text" id="branch" value="main" class="w-full bg-gray-700 border border-gray-600 rounded-md p-2.5 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., main æˆ– gh-pages">
                </div>
            </div>
            <div class="flex items-end gap-2">
                <div class="flex-grow">
                    <label for="destinationPathSelect" class="block text-sm font-medium text-gray-300 mb-1">ç›®æ¨™è·¯å¾‘ (å¯é¸)</label>
                    <select id="destinationPathSelect" class="w-full bg-gray-700 border border-gray-600 rounded-md p-2.5 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        <option value="">-- å…ˆè¼‰å…¥è³‡æ–™å¤¾ --</option>
                    </select>
                </div>
                <button id="loadFoldersBtn" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2.5 px-4 rounded-lg transition-colors duration-300 flex-shrink-0">è¼‰å…¥è³‡æ–™å¤¾</button>
            </div>
             <div>
                <label for="files" class="block text-sm font-medium text-gray-300 mb-1">é¸æ“‡æª”æ¡ˆæˆ–è³‡æ–™å¤¾</label>
                <input type="file" id="files" multiple webkitdirectory class="w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 cursor-pointer">
            </div>
        </div>

        <!-- æ§åˆ¶èˆ‡ç‹€æ…‹ -->
        <div class="flex items-center justify-between">
            <button id="uploadBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 px-6 rounded-lg transition-colors duration-300 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                  <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                  <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                </svg>
                <span>é–‹å§‹ä¸Šå‚³</span>
            </button>
            <div id="status" class="text-sm text-gray-400 flex items-center gap-2"></div>
        </div>

        <!-- çµæœå€ -->
        <div id="results" class="bg-gray-900/70 p-4 rounded-lg space-y-3 max-h-64 overflow-y-auto">
            <!-- ä¸Šå‚³çµæœæœƒé¡¯ç¤ºåœ¨é€™è£¡ -->
        </div>

        <div class="text-center text-xs text-gray-500 pt-4">
            Made by é˜¿å‰›è€å¸«
        </div>
    </div>

    <!-- èªªæ˜åœ–ç‰‡ Modal -->
    <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-auto relative p-4">
            <button id="closeModalBtn" class="absolute top-3 right-3 text-gray-400 hover:text-white bg-gray-700 rounded-full p-1.5 z-10">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                  <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"></path>
                </svg>
            </button>
            <img src="https://kentxchang-goedutw.github.io/web/github%E4%B8%8A%E5%82%B3%E5%B7%A5%E5%85%B7%E8%AA%AA%E6%98%8E/%E8%AA%AA%E6%98%8E.png" alt="èªªæ˜æ–‡ä»¶åœ–ç‰‡" class="w-full h-auto rounded-md">
        </div>
    </div>

    <script>
        const tokenInput = document.getElementById('token');
        const usernameInput = document.getElementById('username');
        const repoInput = document.getElementById('repo');
        const branchInput = document.getElementById('branch');
        const filesInput = document.getElementById('files');
        const uploadBtn = document.getElementById('uploadBtn');
        const statusDiv = document.getElementById('status');
        const resultsDiv = document.getElementById('results');
        const destinationPathSelect = document.getElementById('destinationPathSelect');
        const loadFoldersBtn = document.getElementById('loadFoldersBtn');
        const helpBtn = document.getElementById('helpBtn');
        const helpModal = document.getElementById('helpModal');
        const closeModalBtn = document.getElementById('closeModalBtn');

        const STORAGE_KEY = 'githubUploaderData';

        // å„²å­˜è³‡æ–™åˆ° localStorage (åŒ…å« Token)
        function saveData() {
            const data = {
                token: tokenInput.value,
                username: usernameInput.value.trim(),
                repo: repoInput.value.trim(),
                branch: branchInput.value.trim(),
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        }

        // å¾ localStorage è¼‰å…¥è³‡æ–™
        function loadAndApplyData() {
            const savedData = localStorage.getItem(STORAGE_KEY);
            if (savedData) {
                const data = JSON.parse(savedData);
                tokenInput.value = data.token || '';
                usernameInput.value = data.username || '';
                repoInput.value = data.repo || '';
                branchInput.value = data.branch || 'main';
            }
        }

        // å°‡æª”æ¡ˆå…§å®¹è½‰æ›ç‚º Base64
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = error => reject(error);
            });
        }

        async function fetchRepoFolders() {
            const token = tokenInput.value.trim();
            const username = usernameInput.value.trim();
            const repo = repoInput.value.trim();
            const branch = branchInput.value.trim();

            if (!token || !username || !repo || !branch) {
                statusDiv.innerHTML = '<span class="text-red-500">è«‹å…ˆå¡«å¯« Tokenã€ä½¿ç”¨è€…åç¨±ã€å€‰åº«å’Œåˆ†æ”¯æ¬„ä½ã€‚</span>';
                return;
            }

            loadFoldersBtn.disabled = true;
            loadFoldersBtn.innerHTML = '<div class="loader" style="width:20px; height:20px; border-width: 2px;"></div>';
            destinationPathSelect.innerHTML = '<option value="">è¼‰å…¥ä¸­...</option>';
            destinationPathSelect.disabled = true;

            try {
                // Step 1: Get branch info to find the latest commit SHA
                const branchUrl = `https://api.github.com/repos/${username}/${repo}/branches/${branch}`;
                const branchResponse = await fetch(branchUrl, {
                    headers: { 'Authorization': `token ${token}`, 'Accept': 'application/vnd.github.v3+json' }
                });
                if (!branchResponse.ok) {
                    const errorData = await branchResponse.json().catch(() => ({}));
                    throw new Error(`æ‰¾ä¸åˆ°åˆ†æ”¯ '${branch}' æˆ–å€‰åº« (${branchResponse.status})ã€‚è«‹æª¢æŸ¥è¼¸å…¥ã€‚${errorData.message ? ' æç¤º: ' + errorData.message : ''}`);
                }
                const branchData = await branchResponse.json();
                const latestCommitSha = branchData.commit.sha;

                // Step 2: Get commit info to find the tree SHA
                const commitUrl = `https://api.github.com/repos/${username}/${repo}/git/commits/${latestCommitSha}`;
                const commitResponse = await fetch(commitUrl, {
                    headers: { 'Authorization': `token ${token}`, 'Accept': 'application/vnd.github.v3+json' }
                });
                if (!commitResponse.ok) throw new Error('ç„¡æ³•ç²å– commit è³‡æ–™ã€‚');
                const commitData = await commitResponse.json();
                const treeSha = commitData.tree.sha;

                // Step 3: Get the tree recursively
                const treeUrl = `https://api.github.com/repos/${username}/${repo}/git/trees/${treeSha}?recursive=1`;
                const treeResponse = await fetch(treeUrl, {
                    headers: { 'Authorization': `token ${token}`, 'Accept': 'application/vnd.github.v3+json' }
                });
                if (!treeResponse.ok) throw new Error('ç„¡æ³•ç²å–å€‰åº«æª”æ¡ˆçµæ§‹ã€‚');
                const treeData = await treeResponse.json();
                
                const folders = treeData.tree
                    .filter(item => item.type === 'tree')
                    .map(item => item.path);

                // Populate the select dropdown
                destinationPathSelect.innerHTML = '';
                const rootOption = document.createElement('option');
                rootOption.value = '';
                rootOption.textContent = 'æ ¹ç›®éŒ„ (/)';
                destinationPathSelect.appendChild(rootOption);

                folders.forEach(folder => {
                    const option = document.createElement('option');
                    option.value = folder;
                    option.textContent = folder;
                    destinationPathSelect.appendChild(option);
                });

                destinationPathSelect.disabled = false;
                statusDiv.innerHTML = `<span class="text-green-400">æˆåŠŸè¼‰å…¥ ${folders.length} å€‹è³‡æ–™å¤¾ã€‚</span>`;

            } catch (error) {
                statusDiv.innerHTML = `<span class="text-red-500">éŒ¯èª¤: ${error.message}</span>`;
                destinationPathSelect.innerHTML = '<option value="">-- è¼‰å…¥å¤±æ•— --</option>';
            } finally {
                loadFoldersBtn.disabled = false;
                loadFoldersBtn.textContent = 'è¼‰å…¥è³‡æ–™å¤¾';
            }
        }

        // ä¸Šå‚³å–®ä¸€æª”æ¡ˆåˆ° GitHub
        async function uploadFile(file, token, username, repo, branch, destinationPath) {
            const localPath = file.webkitRelativePath || file.name;
            
            // æ¸…ç†ä¸¦çµ„åˆæœ€çµ‚è·¯å¾‘
            const cleanedDestPath = destinationPath.replace(/^\/|\/$/g, '');
            const finalPathParts = [];
            if (cleanedDestPath) {
                finalPathParts.push(cleanedDestPath);
            }
            finalPathParts.push(localPath);
            const path = finalPathParts.join('/').replace(/\/\/+/g, '/');

            const encodedPath = path.split('/').map(part => encodeURIComponent(part)).join('/');

            try {
                const content = await fileToBase64(file);
                statusDiv.innerHTML = `<span class="text-yellow-400">æ­£åœ¨è™•ç†: ${path}</span>`;
                
                // 1. æª¢æŸ¥æª”æ¡ˆæ˜¯å¦å­˜åœ¨ä»¥å–å¾— SHA
                let sha;
                const getFileUrl = `https://api.github.com/repos/${username}/${repo}/contents/${encodedPath}?ref=${branch}`;
                const getFileResponse = await fetch(getFileUrl, {
                    method: 'GET',
                    headers: { 'Authorization': `token ${token}`, 'Accept': 'application/vnd.github.v3+json' }
                });

                if (getFileResponse.ok) {
                    const fileData = await getFileResponse.json();
                    sha = fileData.sha; // æª”æ¡ˆå·²å­˜åœ¨ï¼Œå–å¾—å…¶ SHA
                } else if (getFileResponse.status !== 404) {
                    // å¦‚æœä¸æ˜¯ "Not Found" éŒ¯èª¤ï¼Œè¡¨ç¤ºæœ‰å…¶ä»–å•é¡Œ (ä¾‹å¦‚æ¬Šé™æˆ–å€‰åº«ä¸å­˜åœ¨)
                    const errorData = await getFileResponse.json();
                     if (getFileResponse.status === 401) {
                        throw new Error(`æˆæ¬Šå¤±æ•—ã€‚è«‹æª¢æŸ¥æ‚¨çš„ Tokenã€‚`);
                    }
                    throw new Error(`æª¢æŸ¥æª”æ¡ˆæ™‚å‡ºéŒ¯ (${getFileResponse.status}): ${errorData.message}`);
                }

                // 2. æº–å‚™ä¸Šå‚³
                statusDiv.innerHTML = `<span class="text-yellow-400">${sha ? 'æ­£åœ¨æ›´æ–°' : 'æ­£åœ¨ä¸Šå‚³'}: ${path}</span>`;
                const uploadUrl = `https://api.github.com/repos/${username}/${repo}/contents/${encodedPath}`;
                const payload = {
                    message: `feat: ${sha ? 'update' : 'upload'} ${path} via web uploader`,
                    content: content,
                    branch: branch,
                    ...(sha && { sha: sha }) // å¦‚æœæ˜¯æ›´æ–°ï¼Œå‰‡åŠ å…¥ sha
                };

                const uploadResponse = await fetch(uploadUrl, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify(payload)
                });

                if (!uploadResponse.ok) {
                    const errorData = await uploadResponse.json();
                     if (uploadResponse.status === 404) {
                        throw new Error(`æ‰¾ä¸åˆ°å€‰åº«ã€‚è«‹æª¢æŸ¥ä½¿ç”¨è€…åç¨± '${username}' å’Œå€‰åº«åç¨± '${repo}'ã€‚`);
                    }
                    if (uploadResponse.status === 401) {
                        throw new Error(`æˆæ¬Šå¤±æ•—ã€‚è«‹æª¢æŸ¥æ‚¨çš„ Token æ˜¯å¦æœ‰ 'repo' æ¬Šé™ã€‚`);
                    }
                    throw new Error(`ä¸Šå‚³æ™‚å‡ºéŒ¯ (${uploadResponse.status}): ${errorData.message}`);
                }
                
                const data = await uploadResponse.json();
                const pagesUrl = `https://${username}.github.io/${repo}/${path}`;

                const resultEl = document.createElement('div');
                resultEl.className = 'bg-gray-800 p-2 rounded-md text-sm';
                resultEl.innerHTML = `
                    <p class="text-green-400 font-medium">${sha ? 'âœ… æ›´æ–°æˆåŠŸ' : 'âœ… ä¸Šå‚³æˆåŠŸ'}: ${path}</p>
                    <a href="${pagesUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:underline file-path-link">${pagesUrl}</a>
                `;
                resultsDiv.appendChild(resultEl);

            } catch (error) {
                // The Fetch API æœ¬èº«å¯èƒ½æœƒæ‹‹å‡ºéŒ¯èª¤ (ä¾‹å¦‚ç¶²è·¯éŒ¯èª¤), é€™ä¸æœƒæ˜¯ JSON å›æ‡‰
                const errorMessage = error.message.includes('Failed to fetch') 
                    ? 'ç¶²è·¯é€£ç·šå¤±æ•—ã€‚è«‹æª¢æŸ¥æ‚¨çš„ç¶²è·¯é€£ç·šä¸¦ç¢ºèªç€è¦½å™¨æ²’æœ‰é˜»æ“‹è«‹æ±‚ã€‚' 
                    : error.message;

                console.error('ä¸Šå‚³å¤±æ•—:', error);
                const resultEl = document.createElement('div');
                resultEl.className = 'bg-gray-800 p-2 rounded-md text-sm';
                resultEl.innerHTML = `
                    <p class="text-red-400 font-medium">âŒ å¤±æ•—: ${path}</p>
                    <p class="text-gray-400 text-xs">${errorMessage}</p>
                `;
                resultsDiv.appendChild(resultEl);
            }
        }

        // --- Event Listeners ---
        // ç•¶ä½¿ç”¨è€…è¼¸å…¥æ™‚è‡ªå‹•å„²å­˜è³‡æ–™
        tokenInput.addEventListener('input', saveData);
        usernameInput.addEventListener('input', saveData);
        repoInput.addEventListener('input', saveData);
        branchInput.addEventListener('input', saveData);

        loadFoldersBtn.addEventListener('click', fetchRepoFolders);

        uploadBtn.addEventListener('click', async () => {
            const token = tokenInput.value.trim();
            const username = usernameInput.value.trim();
            const repo = repoInput.value.trim();
            const branch = branchInput.value.trim();
            const destinationPath = destinationPathSelect.value.trim();
            const files = filesInput.files;

            if (!token || !username || !repo || !branch || files.length === 0) {
                statusDiv.innerHTML = '<span class="text-red-500">æ‰€æœ‰æ¬„ä½çš†ç‚ºå¿…å¡«ï¼Œä¸”å¿…é ˆé¸æ“‡æª”æ¡ˆã€‚</span>';
                return;
            }

            resultsDiv.innerHTML = '';
            uploadBtn.disabled = true;
            uploadBtn.classList.add('opacity-50', 'cursor-not-allowed');
            statusDiv.innerHTML = '<div class="loader"></div> <span>æº–å‚™ä¸Šå‚³...</span>';

            for (const file of files) {
                // åŠ å…¥ä¸€å€‹å°çš„å»¶é²ï¼Œé¿å…éæ–¼é »ç¹åœ°è§¸ç™¼ API
                await new Promise(resolve => setTimeout(resolve, 200)); 
                await uploadFile(file, token, username, repo, branch, destinationPath);
            }

            statusDiv.innerHTML = '<span class="text-green-400">ğŸ‰ æ‰€æœ‰æª”æ¡ˆè™•ç†å®Œæˆï¼</span>';
            uploadBtn.disabled = false;
            uploadBtn.classList.remove('opacity-50', 'cursor-not-allowed');
        });

        // Modal æ§åˆ¶
        helpBtn.addEventListener('click', () => {
            helpModal.classList.remove('hidden');
        });

        closeModalBtn.addEventListener('click', () => {
            helpModal.classList.add('hidden');
        });

        helpModal.addEventListener('click', (e) => {
            // å¦‚æœé»æ“Šçš„ç›®æ¨™æ˜¯èƒŒæ™¯é®ç½©æœ¬èº«ï¼Œå°±é—œé–‰ modal
            if (e.target === helpModal) {
                helpModal.classList.add('hidden');
            }
        });

        // é é¢è¼‰å…¥æ™‚è‡ªå‹•å¡«å…¥ä¸Šæ¬¡çš„è³‡æ–™
        document.addEventListener('DOMContentLoaded', loadAndApplyData);
    </script>
</body>
</html>

