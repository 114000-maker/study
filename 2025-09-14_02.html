<html lang="zh-Hant"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google 教育家基礎課程</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        summary {
            list-style: none;
        }
        summary::-webkit-details-marker {
            display: none;
        }
        details[open] .arrow {
            transform: rotate(90deg);
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid #3498db;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Kahoot 風格按鈕顏色 */
        .kahoot-red { background-color: #e21b3c; }
        .kahoot-blue { background-color: #1368ce; }
        .kahoot-yellow { background-color: #d89e00; }
        .kahoot-green { background-color: #26890c; }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.fixed{position:fixed}.inset-0{inset:0px}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mr-2{margin-right:0.5rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-full{height:100%}.max-h-\[80vh\]{max-height:80vh}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-2xl{max-width:42rem}.max-w-4xl{max-width:56rem}.max-w-5xl{max-width:64rem}.max-w-md{max-width:28rem}.flex-grow{flex-grow:1}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-3{gap:0.75rem}.space-x-2 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.5rem * var(--tw-space-x-reverse));margin-left:calc(0.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:0.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-md{border-radius:0.375rem}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity:1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-purple-700{--tw-bg-opacity:1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-opacity-70{--tw-bg-opacity:0.7}.bg-opacity-80{--tw-bg-opacity:0.8}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.pb-4{padding-bottom:1rem}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.leading-relaxed{line-height:1.625}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-purple-200{--tw-text-opacity:1;color:rgb(233 213 255 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.hover\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:bg-blue-50:hover{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-400:hover{--tw-bg-opacity:1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50:hover{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-red-600:hover{--tw-bg-opacity:1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.hover\:underline:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}@media (min-width: 640px){.sm\:p-6{padding:1.5rem}}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:p-8{padding:2rem}.md\:text-3xl{font-size:1.875rem;line-height:2.25rem}.md\:text-4xl{font-size:2.25rem;line-height:2.5rem}}</style></head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto max-w-4xl p-4 sm:p-6 md:p-8">
        
        <header class="mb-8 bg-purple-700 p-6 rounded-xl shadow-lg text-white">
            <h1 class="text-2xl md:text-3xl font-bold text-white mb-3">Google 認證教育家第 1 級：基礎課程</h1>
            <p class="text-base text-purple-200 leading-relaxed mb-4">
                歡迎參加基礎課程。您將透過閱讀文章、觀看影片和進行活動，學習如何運用 Google 工具進行教學。完成本課程後，即可參加 Google 認證教育家第 1 級的測驗。
            </p>
            <button onclick="showHistory()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105 shadow-md">
                查看學習歷程
            </button>
        </header>

        <div class="space-y-4">
            <!-- 單元 1 -->
            <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 1 單元：以科技輔助課堂教學的事前準備</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u1t1')"><span>探索數位化教室的好處，培育與時俱進的工作習慣</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">23 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u1t2')"><span>熟悉 Google 工具，打造數位化教室</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u1t3')"><span>培養守法、負責任的數位公民</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">25 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u1t4')"><span>跳脫教科書的框架</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">17 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u1')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>
            
            <!-- 單元 2 -->
             <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 2 單元：拓展更多支援和學習管道</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                         <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u2t1')"><span>讓我們為您解答疑惑</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                         <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u2t2')"><span>打造專屬的學習網路</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">17 m</span></li>
                         <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u2t3')"><span>尋找當地 Google for Education 專家</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u2')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>
            
            <!-- 單元 3 -->
            <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 3 單元：打造近乎無紙化的課堂環境</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u3t1')"><span>將檔案移到雲端硬碟</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">17 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u3t2')"><span>向大量的課堂講義說再見</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">17 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u3t3')"><span>利用 Google 表單將測驗移到線上進行</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u3')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 4 -->
             <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 4 單元：節省通訊時間</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u4t1')"><span>利用 Gmail 與您的課堂社群交流</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">17 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u4t2')"><span>整理並搜尋 Gmail 以節省時間</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u4t3')"><span>利用 Google Chat 與學生即時通訊</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u4t4')"><span>利用 Google 網路論壇打造更好的課程討論平台</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u4t5')"><span>與學校社群分享學生學習成果</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u4')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 5 -->
             <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 5 單元：為自己或他人規劃活動</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u5t1')"><span>利用 Google 日曆追蹤課程時間表和預約事項</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u5t2')"><span>Get More Organized</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u5')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 6 -->
             <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 6 單元：線上召開會議</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u6t1')"><span>提高現場開會效率</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">23 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u6t2')"><span>隨時隨地使用 Google Meet 召開會議</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u6')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 7 -->
             <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 7 單元：線上處理學生作業</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                     <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u7t1')"><span>妥善規劃課程</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u7t2')"><span>指派作業更輕鬆</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u7t3')"><span>輕鬆收作業</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">25 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u7t4')"><span>提供及聽取意見回饋</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u7')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 8 -->
             <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 8 單元：評量、瞭解與分享學生的成長</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u8t1')"><span>評量學生進度</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u8t2')"><span>分析學生成長資料</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u8t3')"><span>分享學生的學習成效</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">25 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u8')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 9 -->
             <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 9 單元：教導學生網路技能</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u9t1')"><span>聰明搜尋</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">25 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u9t2')"><span>提升學生的搜尋技巧</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">17 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u9t3')"><span>利用 Chrome 在課堂上探索網路世界</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u9')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 10 -->
             <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 10 單元：設計互動式課程</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                     <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u10t1')"><span>運用 Google 簡報建立引人入勝的簡報</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u10t2')"><span>利用互動式內容改善課程</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u10t3')"><span>利用 Google 地球協助學生學習</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">15 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u10t4')"><span>善用「Your Plan, Your Planet」工具，開始解決環境問題</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u10')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 11 -->
            <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 11 單元：利用影片激發學生興趣</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u11t1')"><span>尋找 YouTube 上的高品質教育內容</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u11t2')"><span>收錄 YouTube 上的教育內容</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u11t3')"><span>營造最佳的觀賞體驗</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u11')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 12 -->
            <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 12 單元：促進小組協同合作</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u12t1')"><span>使用 Google 文件和雲端硬碟促進小組協同合作</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">23 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u12t2')"><span>查看學生在小組作業中的表現</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">14 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u12t3')"><span>更多以科技輔助學生分組協作的方法</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">20 m</span></li>
                    </ul>
                    <button onclick="startAILearning('u12')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 13 -->
            <details class="group bg-white rounded-xl shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-5 cursor-pointer hover:bg-gray-50 transition">
                    <h2 class="text-lg font-semibold text-gray-700">第 13 單元：推廣數位公民概念與正確的網路使用行為</h2>
                    <div class="arrow transition-transform duration-300"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                </summary>
                <div class="bg-gray-50 p-5 border-t border-gray-200">
                    <ul class="space-y-3 text-gray-600 mb-4">
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u13t1')"><span>帶領學生認識網路安全與隱私權</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">25 m</span></li>
                        <li class="flex justify-between items-center p-2 rounded-lg hover:bg-gray-200 cursor-pointer" onclick="startQuiz('u13t2')"><span>提倡安全且負責任的網路使用行為，並打造良好線上形象</span> <span class="text-sm font-medium bg-gray-300 text-gray-700 px-2 py-1 rounded-full">25 m</span></li>
                    </ul>
                     <button onclick="startAILearning('u13')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">
                        🤖 AI 輔助學習
                    </button>
                </div>
            </details>

            <!-- 單元 14 -->
            <div class="group bg-white rounded-xl shadow-sm overflow-hidden p-5">
                <h2 class="text-lg font-semibold text-gray-700 mb-3">第 14 單元：參加認證測驗</h2>
                <a href="https://educertifications.google/" target="_blank" rel="noopener noreferrer" class="flex justify-between items-center p-3 rounded-lg text-blue-600 hover:bg-blue-50 cursor-pointer transition">
                    <span class="font-medium">🔗 前往官方認證網站</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                    </svg>
                </a>
            </div>

        </div>
    </div>
    
    <!-- Kahoot 風格測驗 Modal -->
    <div id="quiz-modal" class="fixed inset-0 bg-gray-900 bg-opacity-80 flex flex-col items-center justify-center p-4 hidden z-50">
        <div id="quiz-content" class="w-full h-full flex flex-col text-white">
            <!-- 問題區域 -->
            <div class="flex-grow flex items-center justify-center">
                <h2 id="question-text" class="text-2xl md:text-4xl font-bold text-center p-8 bg-white text-gray-800 rounded-lg shadow-lg">問題文字</h2>
            </div>
            <!-- 答案選項 -->
            <div id="options-grid" class="grid grid-cols-1 md:grid-cols-2 gap-3 w-full max-w-5xl mx-auto pb-4">
                <!-- 選項會由 JS 動態生成 -->
            </div>
            <!-- 測驗進度 -->
            <div class="w-full max-w-5xl mx-auto flex justify-between items-center text-lg p-2">
                <span id="question-counter">1 / 5</span>
                <span id="score-counter">分數: 0</span>
            </div>
        </div>

        <!-- 最終分數畫面 -->
        <div id="final-score-screen" class="w-full max-w-md bg-white text-gray-800 p-8 rounded-lg shadow-2xl text-center hidden">
            <h2 class="text-3xl font-bold mb-4">測驗結束！</h2>
            <p class="text-xl mb-6">你的最終分數是： <span id="final-score" class="font-bold text-blue-600"></span></p>
            <button onclick="closeQuiz()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform transform hover:scale-105">
                關閉
            </button>
        </div>
    </div>

    <!-- API Key Modal -->
    <div id="api-key-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white w-full max-w-md p-6 rounded-lg shadow-xl flex flex-col">
            <h2 class="text-xl font-bold mb-4">請輸入您的 Gemini API 金鑰</h2>
            <p class="text-gray-600 mb-4">為了使用 AI 輔助學習功能，我們需要您的 Gemini API 金鑰。您的金鑰將會儲存在您的瀏覽器中，不會上傳到任何伺服器。</p>
            <input id="api-key-input" type="password" placeholder="在此貼上您的 API 金鑰" class="w-full p-2 border rounded-md mb-4">
            <a href="https://aistudio.google.com/apikey" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline mb-4 text-sm">點此取得您的 API 金鑰</a>
            <div class="flex justify-end space-x-2">
                <button onclick="closeApiKeyModal()" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">取消</button>
                <button onclick="saveApiKey()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">儲存並繼續</button>
            </div>
        </div>
    </div>

    <!-- AI Response Modal -->
    <div id="ai-response-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white w-full max-w-2xl h-full max-h-[80vh] rounded-lg shadow-xl flex flex-col">
            <header class="p-4 border-b flex justify-between items-center">
                <h2 class="text-xl font-bold">🤖 AI 輔助學習</h2>
                <button onclick="closeAIResponseModal()" class="text-2xl font-bold">×</button>
            </header>
            <main id="ai-response-content" class="p-6 overflow-y-auto space-y-4 leading-relaxed">
                 <!-- AI 回應或載入動畫會顯示在此 -->
            </main>
        </div>
    </div>

    <!-- 學習歷程 Modal -->
    <div id="history-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white w-full max-w-2xl h-full max-h-[80vh] rounded-lg shadow-xl flex flex-col">
            <header class="p-4 border-b flex justify-between items-center">
                <h2 class="text-xl font-bold">學習歷程</h2>
                <div>
                    <button onclick="clearHistory()" class="text-sm bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-3 rounded-md mr-2">清除紀錄</button>
                    <button onclick="closeHistory()" class="text-2xl font-bold">×</button>
                </div>
            </header>
            <main id="history-content" class="p-4 overflow-y-auto space-y-4">
                <!-- 學習歷程會由 JS 動態生成 -->
            </main>
        </div>
    </div>


    <script>
        // --- 單元主題資料 (for AI) ---
        const unitTopics = {
            'u1': ['探索數位化教室的好處，培育與時俱進的工作習慣', '熟悉 Google 工具，打造數位化教室', '培養守法、負責任的數位公民', '跳脫教科書的框架'],
            'u2': ['讓我們為您解答疑惑', '打造專屬的學習網路', '尋找當地 Google for Education 專家'],
            'u3': ['將檔案移到雲端硬碟', '向大量的課堂講義說再見', '利用 Google 表單將測驗移到線上進行'],
            'u4': ['利用 Gmail 與您的課堂社群交流', '整理並搜尋 Gmail 以節省時間', '利用 Google Chat 與學生即時通訊', '利用 Google 網路論壇打造更好的課程討論平台', '與學校社群分享學生學習成果'],
            'u5': ['利用 Google 日曆追蹤課程時間表和預約事項', 'Get More Organized'],
            'u6': ['提高現場開會效率', '隨時隨地使用 Google Meet 召開會議'],
            'u7': ['妥善規劃課程', '指派作業更輕鬆', '輕鬆收作業', '提供及聽取意見回饋'],
            'u8': ['評量學生進度', '分析學生成長資料', '分享學生的學習成效'],
            'u9': ['聰明搜尋', '提升學生的搜尋技巧', '利用 Chrome 在課堂上探索網路世界'],
            'u10': ['運用 Google 簡報建立引人入勝的簡報', '利用互動式內容改善課程', '利用 Google 地球協助學生學習', '善用「Your Plan, Your Planet」工具，開始解決環境問題'],
            'u11': ['尋找 YouTube 上的高品質教育內容', '收錄 YouTube 上的教育內容', '營造最佳的觀賞體驗'],
            'u12': ['使用 Google 文件和雲端硬碟促進小組協同合作', '查看學生在小組作業中的表現', '更多以科技輔助學生分組協作的方法'],
            'u13': ['帶領學生認識網路安全與隱私權', '提倡安全且負責任的網路使用行為，並打造良好線上形象']
        };

        // --- 測驗資料庫 (for Quiz) ---
        const quizzes = {
            'u1t1': { title: '探索數位化教室的好處', questions: [ { question: "下列何者是數位化教室能為學生帶來的主要優勢？", options: ["只能在學校電腦上學習", "隨時隨地存取學習資料與資源", "完全不需要老師的指導", "考試成績一定會比較高"], answer: "隨時隨地存取學習資料與資源" }, { question: "運用科技工具可以幫助學生培養哪種與時俱進的習慣？", options: ["數位協作與溝通能力", "獨立解決問題的能力", "資訊素養與媒體思辨", "以上皆是"], answer: "以上皆是" } ] },
            'u1t2': { title: '熟悉 Google 工具', questions: [ { question: "哪個 Google 工具最適合用來建立線上測驗或問卷？", options: ["Google 文件 (Docs)", "Google 簡報 (Slides)", "Google 表單 (Forms)", "Google 雲端硬碟 (Drive)"], answer: "Google 表單 (Forms)" }, { question: "若要和學生進行小組協同寫作，使用哪個工具最有效率？", options: ["Google 日曆 (Calendar)", "Google 文件 (Docs)", "Gmail", "Google Keep"], answer: "Google 文件 (Docs)" } ] },
            'u1t3': { title: '培養數位公民', questions: [ { question: "在網路上看到不實言論時，身為負責任的數位公民應該怎麼做？", options: ["馬上轉發給所有朋友", "不經查證就留言批評", "保持懷疑態度，並查證資訊來源", "假裝沒看到"], answer: "保持懷疑態度，並查證資訊來源" } ] },
            'u1t4': { title: '跳脫教科書的框架', questions: [ { question: "除了傳統教科書，老師還能利用什麼數位資源來豐富課程內容？", options: ["YouTube 教育影片", "Google 藝術與文化", "Google 地球", "以上皆是"], answer: "以上皆是" } ] },
            'u2t1': { title: '讓我們為您解答疑惑', questions: [ { question: "當您在使用 Google for Education 工具遇到問題時，哪個平台是尋求官方協助和與其他教育者交流的最佳首選？", options: ["Google 搜尋", "YouTube", "Google for Education 說明中心與社群", "Facebook"], answer: "Google for Education 說明中心與社群" } ] },
            'u2t2': { title: '打造專屬的學習網路', questions: [ { question: "什麼是「個人學習網路」(PLN)？", options: ["一個學校的內部網路", "一個付費的線上課程平台", "您為了學習和專業成長而建立的人際與資源網路", "一個用來交作業的系統"], answer: "您為了學習和專業成長而建立的人際與資源網路" } ] },
            'u2t3': { title: '尋找當地 Google for Education 專家', questions: [ { question: "如果您想尋找您所在地區的 Google for Education 認證訓練師或合作夥伴，哪個是最佳的官方資源？", options: ["在 Facebook 教育社團中發問", "使用 Google for Education 全球專家名錄", "直接寄信給 Google 總部", "詢問您學校的 IT 人員"], answer: "使用 Google for Education 全球專家名錄" } ] },
            'u3t1': { title: '將檔案移到雲端硬碟', questions: [ { question: "將檔案儲存在 Google 雲端硬碟，而非本機電腦，最大的好處是什麼？", options: ["檔案只能在特定電腦開啟", "檔案佔用更多儲存空間", "可從任何有網路的裝置存取與分享檔案", "檔案會自動刪除"], answer: "可從任何有網路的裝置存取與分享檔案" }, { question: "在 Google 雲端硬碟中，哪個功能最適合用來整理不同科目的檔案？", options: ["將所有檔案重新命名", "使用不同顏色的檔案圖示", "建立資料夾", "將檔案分享給自己"], answer: "建立資料夾" } ] },
            'u3t2': { title: '向大量的課堂講義說再見', questions: [ { question: "哪個 Google 工具最適合用來建立、發派和管理無紙化作業？", options: ["Google 日曆", "Google Classroom", "Google Keep", "Gmail"], answer: "Google Classroom" } ] },
            'u3t3': { title: '利用 Google 表單將測驗移到線上進行', questions: [ { question: "在 Google 表單的測驗設定中，開啟哪個選項可以讓系統在學生提交後立即為選擇題評分？", options: ["收集電子郵件地址", "僅限回覆一次", "立即顯示成績", "編輯回應"], answer: "立即顯示成績" } ] },
            'u4t1': { title: '利用 Gmail 與您的課堂社群交流', questions: [ { question: "在 Gmail 中，如果您想將特定類型的郵件（例如來自學校行政處的信件）自動整理到特定位置，應該使用哪個功能？", options: ["標示為垃圾郵件", "刪除郵件", "建立篩選器與標籤", "回覆所有郵件"], answer: "建立篩選器與標籤" } ] },
            'u4t2': { title: '整理並搜尋 Gmail 以節省時間', questions: [ { question: "在 Gmail 中，哪個搜尋運算子可以幫助您找到包含特定附件的郵件？", options: ["from:", "subject:", "has:attachment", "is:important"], answer: "has:attachment" } ] },
            'u4t3': { title: '利用 Google Chat 與學生即時通訊', questions: [ { question: "Google Chat 的哪個功能適合用來進行分組討論或專案合作？", options: ["直接訊息 (Direct Message)", "聊天室 (Spaces/Rooms)", "傳送電子郵件", "視訊通話"], answer: "聊天室 (Spaces/Rooms)" } ] },
            'u4t4': { title: '利用 Google 網路論壇打造更好的課程討論平台', questions: [ { question: "Google 網路論壇 (Groups) 作為課程討論平台，相較於一般電子郵件有哪些優點？", options: ["所有討論都集中存放，方便追蹤", "可以設定不同的成員權限", "成員可以選擇接收摘要郵件", "以上皆是"], answer: "以上皆是" } ] },
            'u4t5': { title: '與學校社群分享學生學習成果', questions: [ { question: "哪個 Google 工具最適合用來建立一個簡單的班級網站，以展示學生的專案作品或學習成果？", options: ["Google 文件", "Google 協作平台 (Sites)", "Google 表單", "Google Chat"], answer: "Google 協作平台 (Sites)" } ] },
            'u5t1': { title: '利用 Google 日曆追蹤課程時間表和預約事項', questions: [ { question: "如果您想讓家長預約家長會時間，Google 日曆的哪個功能最方便？", options: ["建立全天活動", "邀請所有家長參加同一個活動", "使用預約時段", "傳送電子郵件詢問"], answer: "使用預約時段" } ] },
            'u5t2': { title: 'Get More Organized', questions: [ { question: "哪個 Google 工具最適合用來快速建立待辦事項清單、儲存靈感或網頁連結？", options: ["Google 文件", "Google 試算表", "Google Keep", "Google 日曆"], answer: "Google Keep" } ] },
            'u6t1': { title: '提高現場開會效率', questions: [ { question: "為了讓會議更有效率，最好的做法是在會議前使用哪個 Google 工具分享議程？", options: ["Google Meet", "Google 試算表", "Google 文件", "Google Chat"], answer: "Google 文件" } ] },
            'u6t2': { title: '隨時隨地使用 Google Meet 召開會議', questions: [ { question: "Google Meet 的哪項功能有助於聽障人士或在吵雜環境中的與會者理解會議內容？", options: ["變更背景", "分享螢幕畫面", "即時字幕", "錄製會議"], answer: "即時字幕" } ] },
            'u7t1': { title: '妥善規劃課程', questions: [ { question: "在 Google Classroom 中，哪個頁面最適合用來組織課程單元、教材和作業？", options: ["訊息串 (Stream)", "課堂作業 (Classwork)", "成員 (People)", "成績 (Grades)"], answer: "課堂作業 (Classwork)" } ] },
            'u7t2': { title: '指派作業更輕鬆', questions: [ { question: "在 Google Classroom 中建立作業時，哪個選項可以讓每個學生都收到一份專屬的 Google 文件範本？", options: ["學生可以檢視檔案", "學生可以編輯檔案", "為每位學生建立副本", "上傳檔案"], answer: "為每位學生建立副本" } ] },
            'u7t3': { title: '輕鬆收作業', questions: [ { question: "學生在 Google Classroom 中完成作業後，應該點擊哪個按鈕來繳交？", options: ["分享 (Share)", "儲存 (Save)", "繳交 (Turn In / Hand In)", "留言 (Comment)"], answer: "繳交 (Turn In / Hand In)" } ] },
            'u7t4': { title: '提供及聽取意見回饋', questions: [ { question: "老師想在學生的 Google 文件作業中，針對某個段落提供修改建議，哪個功能最適合？", options: ["使用電子郵件回覆", "在檔案中新增註解 (Comment)", "直接刪除學生的內容", "打電話給學生"], answer: "在檔案中新增註解 (Comment)" } ] },
            'u8t1': { title: '評量學生進度', questions: [ { question: "在 Google Classroom 中，您可以使用哪個功能來建立評分標準，讓評分更客觀一致？", options: ["評量指標 (Rubrics)", "訊息串公告", "私人註解", "成績類別"], answer: "評量指標 (Rubrics)" } ] },
            'u8t2': { title: '分析學生成長資料', questions: [ { question: "將 Google 表單的測驗結果匯出到哪個工具，最適合用來進行深入的資料分析與圖表製作？", options: ["Google 文件", "Google 簡報", "Google 試算表 (Sheets)", "Google 繪圖"], answer: "Google 試算表 (Sheets)" } ] },
            'u8t3': { title: '分享學生的學習成效', questions: [ { question: "除了寄送成績報告單，哪個 Google 工具適合用來建立學生的個人數位學習歷程檔案 (portfolio)，以展示他們的學習成果？", options: ["Google 協作平台 (Sites)", "Google Chat", "Google Meet", "Google Keep"], answer: "Google 協作平台 (Sites)" } ] },
            'u9t1': { title: '聰明搜尋', questions: [ { question: "如果想搜尋完全符合「愛因斯坦」這個詞的結果，應該如何輸入？", options: ["愛因斯坦", "\"愛因斯坦\"", "搜尋 愛因斯坦", "*愛因斯坦*"], answer: "\"愛因斯坦\"" } ] },
            'u9t2': { title: '提升學生的搜尋技巧', questions: [ { question: "在 Google 搜尋中，想尋找特定檔案類型（例如 PDF），可以使用哪個搜尋運算子？", options: ["filetype:pdf", "type:pdf", "pdf only", "ext:pdf"], answer: "filetype:pdf" } ] },
            'u9t3': { title: '利用 Chrome 在課堂上探索網路世界', questions: [ { question: "Google Chrome 的哪個功能可以幫助學生和老師將常用的網站集合在一起，方便快速存取？", options: ["歷史紀錄", "下載內容", "書籤", "設定"], answer: "書籤" } ] },
            'u10t1': { title: '運用 Google 簡報建立引人入勝的簡報', questions: [ { question: "Google 簡報的哪個功能，可以讓您插入的影片在播放時自動開始？", options: ["新增連結", "插入圖片", "設定影片播放選項為「自動播放」", "新增文字方塊"], answer: "設定影片播放選項為「自動播放」" } ] },
            'u10t2': { title: '利用互動式內容改善課程', questions: [ { question: "若想在 Google 簡報中製作「選擇你的冒險」式互動故事，哪個功能最關鍵？", options: ["新增轉場動畫", "更改背景顏色", "將物件或文字連結到其他投影片", "插入音訊"], answer: "將物件或文字連結到其他投影片" } ] },
            'u10t3': { title: '利用 Google 地球協助學生學習', questions: [ { question: "在 Google 地球中，哪個功能最適合用來講述一個關於歷史路線或地理變遷的故事？", options: ["測量距離", "查看街景服務", "建立包含地標、圖片和說明的專案", "查詢天氣"], answer: "建立包含地標、圖片和說明的專案" } ] },
            'u10t4': { title: '善用「Your Plan, Your Planet」工具', questions: [ { question: "Google 的「Your Plan, Your Planet」工具，主要目標是幫助使用者了解什麼？", options: ["如何規劃一趟完美的旅行", "學習程式設計的基礎", "個人行為對環境的影響與永續生活的知識", "如何製作個人預算表"], answer: "個人行為對環境的影響與永續生活的知識" } ] },
            'u11t1': { title: '尋找 YouTube 上的高品質教育內容', questions: [ { question: "在 YouTube 上尋找教育影片時，哪個篩選功能可以幫助您找到有字幕的影片，以利不同需求的學生學習？", options: ["依上傳日期排序", "篩選出「CC」字幕", "只顯示高畫質影片", "篩選播放清單"], answer: "篩選出「CC」字幕" } ] },
            'u11t2': { title: '收錄 YouTube 上的教育內容', questions: [ { question: "老師找到一部很棒的教學影片，希望整理起來方便日後使用，YouTube 的哪個功能最適合？", options: ["按「喜歡」", "分享到社群媒體", "建立「播放清單」(Playlist)", "下載影片"], answer: "建立「播放清單」(Playlist)" } ] },
            'u11t3': { title: '營造最佳的觀賞體驗', questions: [ { question: "為了避免學生在觀看 YouTube 影片時被不相關的推薦影片或廣告干擾，老師可以怎麼做？", options: ["要求學生閉上眼睛", "使用 YouTube Premium 帳號或將影片嵌入 Google 簡報/Classroom 中", "請學校封鎖 YouTube", "每次都先把影片下載下來"], answer: "使用 YouTube Premium 帳號或將影片嵌入 Google 簡報/Classroom 中" } ] },
            'u12t1': { title: '使用 Google 文件和雲端硬碟促進小組協同合作', questions: [ { question: "在 Google 文件中，哪個核心功能允許多位學生同時編輯同一份文件？", options: ["版本紀錄", "註解功能", "即時協同合作", "檔案下載"], answer: "即時協同合作" } ] },
            'u12t2': { title: '查看學生在小組作業中的表現', questions: [ { question: "老師如何查看 Google 文件中，哪位學生貢獻了哪些內容？", options: ["使用註解功能", "查看「版本紀錄」", "詢問學生", "比較檔案大小"], answer: "查看「版本紀錄」" } ] },
            'u12t3': { title: '更多以科技輔助學生分組協作的方法', questions: [ { question: "除了 Google 文件，哪個 Google 工具特別適合用於小組腦力激盪和視覺化整理點子？", options: ["Google 試算表", "Google Jamboard", "Google 表單", "Gmail"], answer: "Google Jamboard" } ] },
            'u13t1': { title: '帶領學生認識網路安全與隱私權', questions: [ { question: "為了保護個人隱私，學生在網路上應該避免分享下列哪種資訊？", options: ["自己的興趣愛好", "對某本書的看法", "家裡地址和電話號碼", "喜歡的寵物照片"], answer: "家裡地址和電話號碼" } ] },
            'u13t2': { title: '提倡安全且負責任的網路使用行為', questions: [ { question: "什麼是「數位足跡」(Digital Footprint)？", options: ["走路時留下的腳印", "一種新的電腦病毒", "個人在網路上所有活動留下的紀錄", "網路速度的單位"], answer: "個人在網路上所有活動留下的紀錄" } ] }
        };

        // --- Gemini AI API 系統 ---
        const apiKeyModal = document.getElementById('api-key-modal');
        const aiResponseModal = document.getElementById('ai-response-modal');
        const aiResponseContent = document.getElementById('ai-response-content');
        const apiKeyInput = document.getElementById('api-key-input');
        let geminiApiKey = null;
        let pendingUnitId = null;

        function loadApiKey() { geminiApiKey = localStorage.getItem('geminiApiKey'); }
        function showApiKeyModal() { apiKeyModal.classList.remove('hidden'); }
        function closeApiKeyModal() { apiKeyModal.classList.add('hidden'); }
        function saveApiKey() {
            const key = apiKeyInput.value.trim();
            if (key) {
                geminiApiKey = key;
                localStorage.setItem('geminiApiKey', key);
                closeApiKeyModal();
                if (pendingUnitId) {
                    startAILearning(pendingUnitId);
                    pendingUnitId = null;
                }
            } else { showCustomAlert("API 金鑰不可為空！"); }
        }
        function showAIResponseModal() { aiResponseModal.classList.remove('hidden'); }
        function closeAIResponseModal() { aiResponseModal.classList.add('hidden'); }
        async function startAILearning(unitId) {
            if (!geminiApiKey) {
                pendingUnitId = unitId;
                showApiKeyModal();
                return;
            }
            const topics = unitTopics[unitId];
            if (!topics) return;
            showAIResponseModal();
            aiResponseContent.innerHTML = '<div class="flex justify-center items-center h-full"><div class="spinner"></div></div>';
            const prompt = `你是一位專業的 Google 認證教育家講師。請針對以下幾個主題，為準備參加 Google 認證教育家第 1 級的老師進行教學。請用繁體中文回答，針對每個主題：\n1. 提供清晰、條理分明的概念解釋。\n2. 舉一個具體的教學應用範例。\n3. 設計一題相關的單選練習題，並在最後附上正確答案和簡短解析。\n\n教學主題如下：\n- ${topics.join('\n- ')}`;
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${geminiApiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || `請求失敗，狀態碼：${response.status}`);
                }
                const result = await response.json();
                const text = result.candidates[0].content.parts[0].text;
                aiResponseContent.innerHTML = text.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            } catch (error) {
                aiResponseContent.innerHTML = `<p class="text-red-500">發生錯誤：${error.message}</p><p>請確認您的 API 金鑰是否正確，或檢查網路連線。</p>`;
                console.error("Gemini API Error:", error);
            }
        }

        // --- 學習歷程系統 ---
        const historyModal = document.getElementById('history-modal');
        const historyContent = document.getElementById('history-content');
        let learningHistory = [];

        function loadHistory() {
            const historyData = localStorage.getItem('learningHistory');
            if (historyData) { learningHistory = JSON.parse(historyData); }
        }
        function saveHistory() { localStorage.setItem('learningHistory', JSON.stringify(learningHistory)); }
        function recordAnswer(quizId, question, selectedOption, correctAnswer) {
            const quizTitle = quizzes[quizId].title;
            const isCorrect = selectedOption === correctAnswer;
            const timestamp = new Date().toISOString();
            learningHistory.push({ quizId, quizTitle, question, selectedOption, correctAnswer, isCorrect, timestamp });
            saveHistory();
        }
        function showHistory() {
            historyContent.innerHTML = '';
            if (learningHistory.length === 0) {
                historyContent.innerHTML = '<p class="text-center text-gray-500">尚未有學習紀錄。</p>';
                historyModal.classList.remove('hidden');
                return;
            }
            [...learningHistory].reverse().forEach(record => {
                const card = document.createElement('div');
                card.className = 'bg-gray-100 p-4 rounded-lg border';
                const time = new Date(record.timestamp).toLocaleString('zh-TW');
                const resultClass = record.isCorrect ? 'text-green-600' : 'text-red-600';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <p class="font-bold text-gray-700">${record.quizTitle}</p>
                        <span class="text-xs text-gray-500">${time}</span>
                    </div>
                    <p class="mb-2 text-gray-800"><b>問題：</b>${record.question}</p>
                    <p class="mb-2"><b>您的答案：</b><span class="${resultClass}">${record.selectedOption}</span></p>
                    ${!record.isCorrect ? `<p class="text-gray-600"><b>正確答案：</b><span>${record.correctAnswer}</span></p>` : ''}
                `;
                historyContent.appendChild(card);
            });
            historyModal.classList.remove('hidden');
        }
        function closeHistory() { historyModal.classList.add('hidden'); }
        function clearHistory() {
            if (learningHistory.length > 0) {
                 learningHistory = [];
                 saveHistory();
                 showHistory();
            }
        }
        
        // --- 測驗系統邏輯 ---
        const quizModal = document.getElementById('quiz-modal');
        const quizContent = document.getElementById('quiz-content');
        const finalScoreScreen = document.getElementById('final-score-screen');
        const questionText = document.getElementById('question-text');
        const optionsGrid = document.getElementById('options-grid');
        const questionCounter = document.getElementById('question-counter');
        const scoreCounter = document.getElementById('score-counter');
        const finalScore = document.getElementById('final-score');
        let currentQuizId = null;
        let currentQuestionIndex = 0;
        let score = 0;
        const optionColors = ['kahoot-red', 'kahoot-blue', 'kahoot-yellow', 'kahoot-green'];
        const optionShapes = ['▲', '◆', '●', '■'];

        function startQuiz(quizId) {
            if (!quizzes[quizId]) {
                showCustomAlert('此主題尚無測驗題目，敬請期待！');
                return;
            }
            currentQuizId = quizId;
            currentQuestionIndex = 0;
            score = 0;
            quizContent.classList.remove('hidden');
            finalScoreScreen.classList.add('hidden');
            quizModal.classList.remove('hidden');
            displayQuestion();
        }

        function displayQuestion() {
            const quiz = quizzes[currentQuizId];
            const question = quiz.questions[currentQuestionIndex];
            questionText.textContent = question.question;
            optionsGrid.innerHTML = '';
            const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);
            shuffledOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = `p-4 text-white text-lg font-semibold rounded-lg shadow-md flex items-center justify-start transition-opacity ${optionColors[index]}`;
                button.innerHTML = `<span class="text-2xl mr-4">${optionShapes[index]}</span> <span>${option}</span>`;
                button.onclick = () => selectAnswer(option, question.answer, question.question);
                optionsGrid.appendChild(button);
            });
            questionCounter.textContent = `第 ${currentQuestionIndex + 1} / ${quiz.questions.length} 題`;
            scoreCounter.textContent = `分數: ${score}`;
        }
        
        function selectAnswer(selectedOption, correctAnswer, questionText) {
            recordAnswer(currentQuizId, questionText, selectedOption, correctAnswer);
            const buttons = optionsGrid.querySelectorAll('button');
            let isCorrect = selectedOption === correctAnswer;
            buttons.forEach(button => {
                button.disabled = true;
                const buttonText = button.querySelector('span:last-child').textContent;
                if (buttonText === correctAnswer) {
                    button.classList.add('border-4', 'border-white', 'scale-105');
                } else {
                    button.classList.add('opacity-50');
                }
            });
            if (isCorrect) {
                score += 100;
                scoreCounter.textContent = `分數: ${score}`;
            }
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizzes[currentQuizId].questions.length) {
                    displayQuestion();
                } else {
                    showFinalScreen();
                }
            }, 2000);
        }

        function showFinalScreen() {
            quizContent.classList.add('hidden');
            finalScoreScreen.classList.remove('hidden');
            finalScore.textContent = score;
        }

        function closeQuiz() { quizModal.classList.add('hidden'); }

        function showCustomAlert(message) {
            const alertBox = document.createElement('div');
            alertBox.style.position = 'fixed';
            alertBox.style.top = '20px';
            alertBox.style.left = '50%';
            alertBox.style.transform = 'translateX(-50%)';
            alertBox.style.padding = '1rem 2rem';
            alertBox.style.backgroundColor = '#4a148c';
            alertBox.style.color = 'white';
            alertBox.style.borderRadius = '8px';
            alertBox.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
            alertBox.style.zIndex = '100';
            alertBox.textContent = message;
            document.body.appendChild(alertBox);

            setTimeout(() => {
                alertBox.style.transition = 'opacity 0.5s';
                alertBox.style.opacity = '0';
                setTimeout(() => { document.body.removeChild(alertBox); }, 500);
            }, 2500);
        }
        
        // --- 頁面初始化和事件監聽 ---
        document.addEventListener('DOMContentLoaded', () => {
            loadApiKey();
            loadHistory();
        });

        const details = document.querySelectorAll('details');
        details.forEach(targetDetail => {
            targetDetail.addEventListener('toggle', event => {
                if (targetDetail.open) {
                    details.forEach(detail => {
                        if (detail !== targetDetail) {
                            detail.removeAttribute('open');
                        }
                    });
                }
            });
        });
    </script>
</body></html>
